<%- include('../partials/header') -%>
<link rel="stylesheet" href="/stylesheets/style_temp.css" />
<script>
  let subArray = JSON.parse('<%- JSON.stringify(subData) %>');
  console.log(subArray);
</script>
<div class="grid-container">
  <!-- Header -->
  <%- include("./teacherHeader") %>
  <!-- End Header -->

  <!-- Sidebar -->
  <%- include("./teacherSidebar") %>
  <!-- End Sidebar -->
  <div class="main-container" style="width: 40%">
    <form>
      <div class="mb-3 h1">Add Question</div>
      <div class="mb-3">
        <select
          class="form-control"
          id="subject"
        >
          <% subData.forEach(element=> { %>
          <option value="<%= element._id %>">
            <%= element.code %> : <%=element.name%>
          </option>
          <% }) %>
        </select>
      </div>
      <div class="mb-3">
        <select name="co" class="form-select" id="coSelect" disabled>
          <option selected>Select CO</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="topic" class="form-label">Topic :</label>
        <input
          type="text"
          class="form-control"
          id="topic"
          name="topic"
          required
        />
      </div>

      <div class="mb-3">
        <button type="reset" class="btn btn-secondary">Reset</button>
        <button type="submit" class="btn btn-primary">Save changes</button>
      </div>
    </form>
  </div>
  <%- include('../partials/footer')-%>
  <script>
    $(function () {
      $("#subject").select2();
      function coSelect(data) {
        console.log("hii");
        
      }
      $("#subject").change(()=>{
        // console.log(this.value);
        let data= $(this).find(":selected").val()
        subArray.forEach((element) => {
          if (element["_id"] === data) {
            let cos = "";
            for (let i = 1; i <= element["course_outcomes"]; i++) {
              cos += `<option value=${i}>CO-${i}</option>`;
            }
            $("#coSelect").prop("disabled", false);
            $("#coSelect").html(cos);
          }
        });
       

      })
    });
  </script>
</div>
